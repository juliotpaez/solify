"use strict";(globalThis["webpackChunksolify"]=globalThis["webpackChunksolify"]||[]).push([[619],{85351:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ba});var l=a(59835),n=a(60499),o=a(86970),i=a(61957),s=a(28732),u=a(53141),r=a(55185),d=a(40622);let c=2;const p=(0,s.Q_)("txBuilderApp",{state:()=>{var e;const t=(0,d.Os)();return{groups:[{name:"Group 1",transactions:[{name:"Transaction 1",instructions:[r.v],data:[r.v.instantiate(r.v)],payer:null!==(e=t.publicKey.value)&&void 0!==e?e:u.PublicKey["default"]}]}],groupIndex:0,showSignDialog:!1}},getters:{currentGroup:e=>e.groups[e.groupIndex],web3Transactions(){return this.currentGroup.transactions.map((e=>{const t=new u.Transaction({feePayer:e.payer,recentBlockhash:u.PublicKey["default"].toBase58()}),a=e.instructions.map(((t,a)=>t.build(t,e.data[a])));return 0!==a.length&&t.add(...a),t}))},encodedTransactions(){return this.web3Transactions.map((e=>e.serialize({requireAllSignatures:!1,verifySignatures:!1})))}},actions:{addGroup(){var e;const t=(0,d.Os)();this.groups.push({name:`Group ${c}`,transactions:[{name:"Transaction 1",instructions:[r.v],data:[r.v.instantiate(r.v)],payer:null!==(e=t.publicKey.value)&&void 0!==e?e:u.PublicKey["default"]}]}),c+=1},removeGroup(e){this.groups.length<=1||(this.groupIndex>=e&&this.groupIndex>0&&(this.groupIndex-=1),this.groups.splice(e,1))}}});var m=a(95631),v=a(40842),g=a(13120),w=a(86870),f=a(36154);const y=e=>((0,l.dD)("data-v-c304584a"),e=e(),(0,l.Cn)(),e),b=y((()=>(0,l._)("h6",{class:"text-center q-mb-sm"},"Instruction selector",-1))),h={class:"overflow-auto col q-mt-md"},x={class:"row justify-center q-my-md"},_=(0,l.aZ)({__name:"InstructionSelector",props:{initialSearch:null},emits:["select"],setup(e,{emit:t}){var a;const i=e,s=20,u=(0,f.v)(),r=(0,n.iH)(null!==(a=i.initialSearch)&&void 0!==a?a:""),d=(0,n.iH)(0),c=(0,l.Fl)((()=>u.programs.map((e=>e.instructions.map((t=>({program:e,instruction:t}))))).reduce(((e,t)=>e.concat(t)),[]))),p=(0,l.Fl)((()=>{if(""===r.value)return c.value.slice(0);const e=r.value.toLowerCase();return c.value.filter((t=>-1!==t.program.name.toLowerCase().indexOf(e)||-1!==t.instruction.name.toLowerCase().indexOf(e)||-1!==t.instruction.description.toLowerCase().indexOf(e)))})),m=(0,l.Fl)((()=>p.value.slice(0,s*(d.value+1))));function v(e){t("select",e)}function y(e,t){d.value+=1,t()}return(0,l.YP)(r,(()=>{d.value=0})),(e,t)=>{const a=(0,l.up)("q-item-label"),i=(0,l.up)("q-item-section"),s=(0,l.up)("q-item"),u=(0,l.up)("q-list"),d=(0,l.up)("q-spinner-dots"),c=(0,l.up)("q-card-section"),p=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(p,{class:"instruction-selector"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"full-height column"},{default:(0,l.w5)((()=>[b,(0,l.Wm)(g.Z,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),placeholder:"Search instruction",debounce:300},null,8,["modelValue"]),(0,l._)("div",h,[(0,l.Wm)((0,n.SU)(w.Z),{onLoad:y,offset:250,ref:"infiniteScroll",class:"full-width"},{loading:(0,l.w5)((()=>[(0,l._)("div",x,[(0,l.Wm)(d,{color:"primary",size:"40px"})])])),default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(m),(e=>((0,l.wg)(),(0,l.j4)(s,{class:"q-mb-xs",key:e.program.name+"::"+e.instruction.name,clickable:"",onClick:t=>v(e)},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-py-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[(0,l._)("b",null,(0,o.zw)(e.program.name),1),(0,l.Uk)("::"+(0,o.zw)(e.instruction.name),1)])),_:2},1024),e.instruction.description?((0,l.wg)(),(0,l.j4)(a,{key:0,caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.instruction.description),1)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},512)])])),_:1})])),_:1})}}});var k=a(11639),S=a(44458),q=a(63190),U=a(13246),W=a(490),Z=a(76749),Q=a(33115),V=a(47501),C=a(69984),j=a.n(C);const z=(0,k.Z)(_,[["__scopeId","data-v-c304584a"]]),D=z;j()(_,"components",{QCard:S.Z,QCardSection:q.Z,QInfiniteScroll:w.Z,QList:U.Z,QItem:W.Z,QItemSection:Z.Z,QItemLabel:Q.Z,QSpinnerDots:V.Z});var I=a(68093),K=a(15120),F=a(21394);const T=e=>((0,l.dD)("data-v-b5127b5e"),e=e(),(0,l.Cn)(),e),B=T((()=>(0,l._)("h6",{class:"text-center q-mb-sm"},"Program selector",-1))),H={class:"overflow-auto col q-mt-md"},P={class:"row justify-center q-my-md"},Y=(0,l.aZ)({__name:"ProgramSelector",props:{initialSearch:null},emits:["select"],setup(e,{emit:t}){var a;const i=e,s=20,u=(0,f.v)(),r=(0,n.iH)(null!==(a=i.initialSearch)&&void 0!==a?a:""),d=(0,n.iH)(0),c=(0,l.Fl)((()=>{if(""===r.value)return u.programs.slice(0);const e=r.value.toLowerCase();return u.programs.filter((t=>-1!==t.name.toLowerCase().indexOf(e)||t.description&&-1!==t.description.toLowerCase().indexOf(e)))})),p=(0,l.Fl)((()=>c.value.slice(0,s*(d.value+1))));function m(e){t("select",e)}function v(e,t){d.value+=1,t()}return(0,l.YP)(r,(()=>{d.value=0})),(e,t)=>{const a=(0,l.up)("q-item-label"),i=(0,l.up)("q-item-section"),s=(0,l.up)("q-item"),u=(0,l.up)("q-list"),d=(0,l.up)("q-spinner-dots"),c=(0,l.up)("q-card-section"),f=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(f,{class:"program-selector"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"full-height column"},{default:(0,l.w5)((()=>[B,(0,l.Wm)(g.Z,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),placeholder:"Search program",debounce:300},null,8,["modelValue"]),(0,l._)("div",H,[(0,l.Wm)((0,n.SU)(w.Z),{onLoad:v,offset:250,ref:"infiniteScroll",class:"full-width"},{loading:(0,l.w5)((()=>[(0,l._)("div",P,[(0,l.Wm)(d,{color:"primary",size:"40px"})])])),default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(p),(e=>((0,l.wg)(),(0,l.j4)(s,{class:"q-mb-xs",key:e.name,clickable:"",onClick:t=>m(e)},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-py-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[(0,l._)("b",null,(0,o.zw)(e.name),1)])),_:2},1024),e.description?((0,l.wg)(),(0,l.j4)(a,{key:0,caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.description),1)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},512)])])),_:1})])),_:1})}}}),L=(0,k.Z)(Y,[["__scopeId","data-v-b5127b5e"]]),A=L;j()(Y,"components",{QCard:S.Z,QCardSection:q.Z,QInfiniteScroll:w.Z,QList:U.Z,QItem:W.Z,QItemSection:Z.Z,QItemLabel:Q.Z,QSpinnerDots:V.Z});const G=(0,l.Uk)("Program"),O=(0,l.aZ)({__name:"ProgramInput",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,n.iH)(!1);function o(e){i(e.address),a.value=!1}function i(e){t("update:modelValue",e)}return(t,n)=>{const s=(0,l.up)("q-btn"),u=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(v.Z,{"model-value":e.modelValue,"onUpdate:modelValue":i,hint:"Pick a program",class:"program-input"},{append:(0,l.w5)((()=>[(0,l.Wm)(s,{round:"",class:"rounded-borders q-px-sm",onClick:n[0]||(n[0]=e=>a.value=!0),flat:""},{default:(0,l.w5)((()=>[G])),_:1}),(0,l.Wm)(u,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=e=>a.value=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{onSelect:o})])),_:1},8,["modelValue"])])),_:1},8,["model-value"])}}});var M=a(24455),$=a(32074),E=a(18149);const N=(0,k.Z)(O,[["__scopeId","data-v-d46d1cfc"]]),J=N;j()(O,"components",{QBtn:M.Z,QDialog:$.Z,QField:E.Z});var R=a(98416);const X={class:"q-px-md q-mt-md"},ee={class:"col"},te={class:"text-secondary text-caption text-bold row justify-between"},ae={class:"row gap-x-sm"},le=(0,l.Uk)("Mutable"),ne=(0,l.Uk)("Signer "),oe={key:0,class:"text-caption text-bold"},ie={key:0},se={key:1},ue={key:2},re={key:3},de={key:4},ce={key:5},pe={key:6},me={key:7},ve=(0,l.aZ)({__name:"InstructionArgumentBox",props:{argument:null,data:null},setup(e){const t=e,a=(0,l.Fl)((()=>t.data)),i=(0,l.Fl)((()=>{const e=a.value[t.argument.id];return(0,F.V)(e)?e:e.publicKey}));function s(e){var l;const n=t.argument.data;try{let o;o=n.float?parseFloat(e):parseInt(e),void 0!==n.max&&(o=Math.min(o,n.max)),void 0!==n.min&&(o=Math.max(o,n.min)),isNaN(o)&&(o=null!==(l=n.defaultValue)&&void 0!==l?l:0),a.value[t.argument.id]=o}catch(o){}}function u(e){a.value[t.argument.id]=e}return(t,r)=>{const d=(0,l.up)("q-badge"),c=(0,l.up)("q-toggle"),p=(0,l.up)("q-input");return(0,l.wg)(),(0,l.iD)("div",X,[(0,l._)("div",ee,[(0,l._)("div",te,[(0,l._)("div",null,(0,o.zw)(e.argument.name),1),(0,l._)("div",ae,[e.argument.mutable?((0,l.wg)(),(0,l.j4)(d,{key:0,color:"blue","text-color":"white",class:"text-bold"},{default:(0,l.w5)((()=>[le])),_:1})):(0,l.kq)("",!0),e.argument.signer?((0,l.wg)(),(0,l.j4)(d,{key:1,color:"secondary","text-color":"dark",class:"text-bold"},{default:(0,l.w5)((()=>[ne])),_:1})):(0,l.kq)("",!0)])]),e.argument.description?((0,l.wg)(),(0,l.iD)("div",oe,(0,o.zw)(e.argument.description),1)):(0,l.kq)("",!0)]),"bool"===e.argument.data.type?((0,l.wg)(),(0,l.iD)("div",ie,[(0,l.Wm)(c,{modelValue:(0,n.SU)(a)[e.argument.id],"onUpdate:modelValue":r[0]||(r[0]=t=>(0,n.SU)(a)[e.argument.id]=t),dense:"",disable:e.argument.readonly},null,8,["modelValue","disable"])])):"number"===e.argument.data.type?((0,l.wg)(),(0,l.iD)("div",se,[(0,l.Wm)(p,{"model-value":e.data[e.argument.id],readonly:e.argument.readonly,outlined:"",dense:"","onUpdate:modelValue":s},null,8,["model-value","readonly"])])):"bytes"===e.argument.data.type?((0,l.wg)(),(0,l.iD)("div",ue,[(0,l.Wm)(R.Z,{modelValue:(0,n.SU)(a)[e.argument.id],"onUpdate:modelValue":r[1]||(r[1]=t=>(0,n.SU)(a)[e.argument.id]=t),readonly:e.argument.readonly,max:e.argument.data.max,outlined:"",dense:""},null,8,["modelValue","readonly","max"])])):"bignum"===e.argument.data.type?((0,l.wg)(),(0,l.iD)("div",re,[(0,l.Wm)(I.Z,{modelValue:(0,n.SU)(a)[e.argument.id],"onUpdate:modelValue":r[2]||(r[2]=t=>(0,n.SU)(a)[e.argument.id]=t),readonly:e.argument.readonly,outlined:"",dense:"",max:e.argument.data.max,min:e.argument.data.min},null,8,["modelValue","readonly","max","min"])])):"bps"===e.argument.data.type?((0,l.wg)(),(0,l.iD)("div",de,[(0,l.Wm)(K.Z,{modelValue:(0,n.SU)(a)[e.argument.id],"onUpdate:modelValue":r[3]||(r[3]=t=>(0,n.SU)(a)[e.argument.id]=t),token:e.argument.data.tokenAddress,"in-bps":"",readonly:e.argument.readonly},null,8,["modelValue","token","readonly"])])):"string"===e.argument.data.type?((0,l.wg)(),(0,l.iD)("div",ce,[(0,l.Wm)(p,{modelValue:(0,n.SU)(a)[e.argument.id],"onUpdate:modelValue":r[4]||(r[4]=t=>(0,n.SU)(a)[e.argument.id]=t),readonly:e.argument.readonly,maxlength:e.argument.data.maxLength,outlined:"",dense:""},null,8,["modelValue","readonly","maxlength"])])):"program"===e.argument.data.type?((0,l.wg)(),(0,l.iD)("div",pe,[(0,l.Wm)(J,{modelValue:(0,n.SU)(a)[e.argument.id],"onUpdate:modelValue":r[5]||(r[5]=t=>(0,n.SU)(a)[e.argument.id]=t),readonly:e.argument.readonly,outlined:"",dense:""},null,8,["modelValue","readonly"])])):"address"===e.argument.data.type?((0,l.wg)(),(0,l.iD)("div",me,[(0,l.Wm)(v.Z,{"model-value":(0,n.SU)(i),readonly:e.argument.readonly,outlined:"",dense:"","show-wallet-button":"","onUpdate:modelValue":u},null,8,["model-value","readonly"])])):(0,l.kq)("",!0)])}}});var ge=a(20990),we=a(23175),fe=a(66611);const ye=ve,be=ye;j()(ve,"components",{QBadge:ge.Z,QToggle:we.Z,QInput:fe.Z});const he={class:"ixn-box rounded-borders full-width"},xe={class:"q-pa-sm full-width"},_e={class:"row items-center q-px-md"},ke={class:"ellipsis text-bold"},Se={class:"row gap-sm"},qe=(0,l.Uk)("Move to previous transaction "),Ue=(0,l.Uk)("Move to next transaction "),We={class:"text-caption text-bold q-px-md"},Ze=(0,l.aZ)({__name:"InstructionView",props:{transaction:null,index:null,transactionIndex:null},setup(e){const t=e,a=p(),{currentGroup:i}=(0,s.Jk)(a),u=(0,l.Fl)((()=>i.value.transactions)),r=(0,l.Fl)((()=>t.transaction)),d=(0,l.Fl)((()=>t.transaction.data[t.index])),c=(0,l.Fl)((()=>t.transaction.instructions[t.index])),m=(0,l.Fl)((()=>t.index>0)),v=(0,l.Fl)((()=>t.index<t.transaction.instructions.length-1)),g=(0,l.Fl)((()=>!m.value&&t.transactionIndex>0)),w=(0,l.Fl)((()=>!v.value&&t.transactionIndex<u.value.length-1));function f(){r.value.instructions.splice(t.index,1),r.value.data.splice(t.index,1)}function y(){const e=r.value.instructions.splice(t.index,1)[0],a=r.value.data.splice(t.index,1)[0];r.value.instructions.splice(t.index-1,0,e),r.value.data.splice(t.index-1,0,a)}function b(){const e=r.value.instructions.splice(t.index,1)[0],a=r.value.data.splice(t.index,1)[0];r.value.instructions.splice(t.index+1,0,e),r.value.data.splice(t.index+1,0,a)}function h(){const e=r.value.instructions.splice(t.index,1)[0],a=r.value.data.splice(t.index,1)[0],l=u.value[t.transactionIndex-1];l.instructions.push(e),l.data.push(a)}function x(){const e=r.value.instructions.splice(t.index,1)[0],a=r.value.data.splice(t.index,1)[0],l=u.value[t.transactionIndex+1];l.instructions.unshift(e),l.data.unshift(a)}return(t,a)=>{const i=(0,l.up)("q-space"),s=(0,l.up)("q-btn"),u=(0,l.up)("q-tooltip");return(0,l.wg)(),(0,l.iD)("div",he,[(0,l._)("div",xe,[(0,l._)("div",_e,[(0,l._)("div",ke,"#"+(0,o.zw)(e.index+1)+" "+(0,o.zw)((0,n.SU)(c).name),1),(0,l.Wm)(i),(0,l._)("div",Se,[(0,n.SU)(m)?((0,l.wg)(),(0,l.j4)(s,{key:0,dense:"",flat:"",icon:"fa-solid fa-chevron-up",size:"sm",onClick:y})):((0,l.wg)(),(0,l.j4)(s,{key:1,dense:"",flat:"",icon:"fa-solid fa-angles-up",disable:!(0,n.SU)(g),size:"sm",onClick:h},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"text-no-wrap text-white text-bold shadow-2"},{default:(0,l.w5)((()=>[qe])),_:1})])),_:1},8,["disable"])),(0,n.SU)(v)?((0,l.wg)(),(0,l.j4)(s,{key:2,dense:"",flat:"",icon:"fa-solid fa-chevron-down",size:"sm",onClick:b})):((0,l.wg)(),(0,l.j4)(s,{key:3,dense:"",flat:"",icon:"fa-solid fa-angles-down",disable:!(0,n.SU)(w),size:"sm",onClick:x},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"text-no-wrap text-white text-bold shadow-2"},{default:(0,l.w5)((()=>[Ue])),_:1})])),_:1},8,["disable"])),(0,l.Wm)(s,{dense:"",flat:"",icon:"fa-solid fa-trash",size:"sm",color:"negative",onClick:f})])]),(0,l._)("div",We,(0,o.zw)((0,n.SU)(c).description),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(c).accounts,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l.Wm)(be,{argument:e,data:(0,n.SU)(d)},null,8,["argument","data"])])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(c).arguments,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l.Wm)(be,{argument:e,data:(0,n.SU)(d)},null,8,["argument","data"])])))),128))])])}}});var Qe=a(90136),Ve=a(46858);const Ce=(0,k.Z)(Ze,[["__scopeId","data-v-c42fc3bc"]]),je=Ce;j()(Ze,"components",{QSpace:Qe.Z,QBtn:M.Z,QTooltip:Ve.Z});var ze=a(678),De=a(65054),Ie=a(19302),Ke=a(17779),Fe=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,o){function i(e){try{u(l.next(e))}catch(t){o(t)}}function s(e){try{u(l["throw"](e))}catch(t){o(t)}}function u(e){e.done?a(e.value):n(e.value).then(i,s)}u((l=l.apply(e,t||[])).next())}))};const Te=e=>((0,l.dD)("data-v-33883a66"),e=e(),(0,l.Cn)(),e),Be={class:"tx-box shadow-2 full-width rounded-borders overflow-hidden"},He={class:"cursor-pointer text-no-wrap"},Pe={class:"row no-wrap gap-sm"},Ye=(0,l.Uk)("Copy encoded"),Le=(0,l.Uk)("Simulate in Solana Explorer "),Ae=Te((()=>(0,l._)("div",null,"Fee payer:",-1))),Ge={class:"column flex-center"},Oe=Te((()=>(0,l._)("div",{class:"tx-v-bar"},null,-1))),Me=Te((()=>(0,l._)("div",{class:"tx-v-bar"},null,-1))),$e={class:"q-px-lg full-width"},Ee=Te((()=>(0,l._)("div",{class:"tx-v-bar"},null,-1))),Ne=Te((()=>(0,l._)("div",{class:"tx-v-bar"},null,-1))),Je=(0,l.aZ)({__name:"TransactionView",props:{index:null},setup(e){const t=e,a=(0,Ie.Z)(),r=p(),{currentGroup:d,web3Transactions:c,encodedTransactions:g}=(0,s.Jk)(r),w=(0,n.iH)(0),f=(0,n.iH)(!1),y=(0,l.Fl)((()=>d.value.transactions)),b=(0,l.Fl)((()=>y.value[t.index])),h=(0,l.Fl)((()=>t.index>0)),x=(0,l.Fl)((()=>t.index<y.value.length-1)),_=(0,l.Fl)((()=>g.value[t.index].length)),k=(0,l.Fl)((()=>_.value>u.PACKET_DATA_SIZE));function S(){y.value.splice(t.index,1)}function q(){const e=y.value.splice(t.index,1)[0];y.value.splice(t.index-1,0,e)}function U(){const e=y.value.splice(t.index,1)[0];y.value.splice(t.index+1,0,e)}function W(e){w.value=e,f.value=!0}function Z(e){b.value.instructions.splice(w.value,0,e.instruction),b.value.data.splice(w.value,0,e.instruction.instantiate(e.instruction)),f.value=!1,w.value=0}function Q(){return Fe(this,void 0,void 0,(function*(){const e=c.value[t.index],a=e.serializeMessage().toString("base64"),l=(0,ze.rW)(a);window.open(`https://explorer.solana.com/tx/inspector?message=${l}`)}))}function V(){return Fe(this,void 0,void 0,(function*(){const e=c.value[t.index],l=e.serializeMessage().toString("base64");try{yield(0,De.Z)(l),a.notify({message:"Copied!",color:"positive",badgeColor:"positive"})}catch(n){Ke.error("Error copying to clipboard",n),a.notify({message:"Error copying to clipboard",color:"negative",badgeColor:"negative"})}}))}return(t,a)=>{const s=(0,l.up)("q-input"),r=(0,l.up)("q-popup-edit"),d=(0,l.up)("q-tooltip"),c=(0,l.up)("q-btn"),p=(0,l.up)("q-separator"),g=(0,l.up)("q-bar"),w=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)("div",Be,[(0,l.Wm)(g,{class:"justify-between"},{default:(0,l.w5)((()=>[(0,l._)("div",He,[(0,l._)("b",null,"#"+(0,o.zw)(e.index+1)+" "+(0,o.zw)((0,n.SU)(b).name),1),(0,l.Wm)(r,{modelValue:(0,n.SU)(b).name,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.SU)(b).name=e),"auto-save":""},{default:(0,l.w5)((e=>[(0,l.Wm)(s,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,maxlength:20,dense:"",autofocus:"",onKeyup:(0,i.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:1},8,["modelValue"])]),(0,l._)("div",Pe,[(0,l.Wm)(c,{dense:"",flat:"",icon:"fa-solid fa-file",size:"sm",onClick:V},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"text-no-wrap text-white text-bold shadow-2"},{default:(0,l.w5)((()=>[Ye])),_:1})])),_:1}),(0,l.Wm)(c,{dense:"",flat:"",icon:"fa-solid fa-laptop-file",size:"sm",onClick:Q},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"text-no-wrap text-white text-bold shadow-2"},{default:(0,l.w5)((()=>[Le])),_:1})])),_:1}),(0,l.Wm)(p,{vertical:""}),(0,l.Wm)(c,{dense:"",flat:"",icon:"fa-solid fa-chevron-up",disable:!(0,n.SU)(h),size:"sm",onClick:q},null,8,["disable"]),(0,l.Wm)(c,{dense:"",flat:"",icon:"fa-solid fa-chevron-down",disable:!(0,n.SU)(x),size:"sm",onClick:U},null,8,["disable"]),(0,l.Wm)(c,{dense:"",flat:"",icon:"fa-solid fa-trash",size:"sm",color:"negative",onClick:S})])])),_:1}),(0,l.Wm)(p),(0,l.Wm)(g,{class:"justify-center gap-x-md"},{default:(0,l.w5)((()=>[Ae,(0,l.Wm)(v.Z,{modelValue:(0,n.SU)(b).payer,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.SU)(b).payer=e),dense:"",class:"fee-payer-input col","show-wallet-button":""},null,8,["modelValue"])])),_:1}),(0,n.SU)(k)?((0,l.wg)(),(0,l.j4)(m.Z,{key:0,type:"error"},{default:(0,l.w5)((()=>[(0,l._)("div",null,"The size of this transaction exceeds the maximum allowed for a single transaction which is "+(0,o.zw)((0,n.SU)(u.PACKET_DATA_SIZE))+" bytes. Please move one instruction to another transaction or try to decrease the size of any parameter. ",1)])),_:1})):(0,l.kq)("",!0),(0,l._)("div",Ge,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(b).instructions,((t,a)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},[Oe,(0,l.Wm)(c,{unelevated:"",color:"secondary","text-color":"dark",size:"sm",label:"Add instruction",class:"text-bold",onClick:e=>W(a)},null,8,["onClick"]),Me,(0,l._)("div",$e,[(0,l.Wm)(je,{transaction:(0,n.SU)(b),index:a,"transaction-index":e.index},null,8,["transaction","index","transaction-index"])])],64)))),128)),Ee,(0,l.Wm)(c,{unelevated:"",color:"secondary","text-color":"dark",size:"sm",label:"Add instruction",class:"text-bold",onClick:a[2]||(a[2]=e=>W((0,n.SU)(b).instructions.length))}),Ne]),(0,l.Wm)(w,{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=e=>f.value=e)},{default:(0,l.w5)((()=>[f.value?((0,l.wg)(),(0,l.j4)(D,{key:0,onSelect:Z})):(0,l.kq)("",!0)])),_:1},8,["modelValue"])])}}});var Re=a(64526),Xe=a(59843),et=a(50926);const tt=(0,k.Z)(Je,[["__scopeId","data-v-33883a66"]]),at=tt;j()(Je,"components",{QBar:Re.Z,QPopupEdit:Xe.Z,QInput:fe.Z,QBtn:M.Z,QTooltip:Ve.Z,QSeparator:et.Z,QDialog:$.Z,QField:E.Z});const lt=e=>((0,l.dD)("data-v-39311e04"),e=e(),(0,l.Cn)(),e),nt={class:"column justify-start flex-center"},ot=lt((()=>(0,l._)("div",{class:"tx-v-bar"},null,-1))),it=lt((()=>(0,l._)("div",{class:"tx-v-bar"},null,-1))),st=lt((()=>(0,l._)("div",{class:"q-pa-sm bg-grey-9 rounded-borders full-width row flex-center shadow-2"}," No transactions ",-1))),ut=lt((()=>(0,l._)("div",{class:"tx-v-bar"},null,-1))),rt=(0,l.aZ)({__name:"TransactionGroupView",setup(e){const t=(0,d.Os)(),a=p(),{currentGroup:o}=(0,s.Jk)(a),i=(0,l.Fl)((()=>o.value.transactions));function c(e){var a,l,n,o;let s=i.value.length+1;while(1){const d=`Transaction ${s}`;if(!i.value.some((e=>e.name===d))){let s=t.publicKey.value;null==s&&(s=0===i.value.length?u.PublicKey["default"]:0===e?null!==(l=null===(a=i.value[0])||void 0===a?void 0:a.payer)&&void 0!==l?l:u.PublicKey["default"]:null!==(o=null===(n=i.value[e-1])||void 0===n?void 0:n.payer)&&void 0!==o?o:u.PublicKey["default"]),i.value.splice(e,0,{name:d,instructions:[r.v],data:[r.v.instantiate(r.v)],payer:s});break}s+=1}}return(e,t)=>{const a=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",nt,[0!==(0,n.SU)(i).length?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(i),((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[(0,l._)("div",null,[(0,l.Wm)(a,{unelevated:"",color:"primary",size:"sm",label:"Add transaction",class:"text-bold",onClick:e=>c(t)},null,8,["onClick"])]),ot,(0,l.Wm)(at,{index:t},null,8,["index"]),it],64)))),128)),(0,l.Wm)(a,{unelevated:"",color:"primary",size:"sm",label:"Add transaction",class:"text-bold",onClick:t[0]||(t[0]=e=>c((0,n.SU)(i).length))})],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[st,ut,(0,l._)("div",null,[(0,l.Wm)(a,{unelevated:"",color:"primary",size:"sm",label:"Add transaction",class:"text-bold",onClick:t[1]||(t[1]=e=>c((0,n.SU)(i).length))})])],64))])}}}),dt=(0,k.Z)(rt,[["__scopeId","data-v-39311e04"]]),ct=dt;j()(rt,"components",{QBtn:M.Z});var pt=a(77725);const mt={class:"row items-center justify-between text-caption text-bold"},vt=(0,l._)("div",{class:"text-secondary"},"Transactions",-1),gt=(0,l._)("div",{class:"row items-center justify-between text-caption text-bold text-secondary"},"Instructions ",-1),wt={class:"q-pl-md"},ft={class:"text-caption text-right text-bold"},yt=(0,l._)("div",{class:"row items-center justify-between text-caption text-bold text-secondary"},"Signatures ",-1),bt={class:"q-pl-md"},ht={class:"text-caption text-right text-bold"},xt=(0,l._)("div",{class:"row items-center justify-between text-caption text-bold text-secondary"},"Bytes ",-1),_t={class:"q-pl-md"},kt={class:"text-caption text-right text-bold"},St=(0,l._)("div",{class:"row items-center justify-between text-caption text-bold text-secondary"},"Network fees ",-1),qt={class:"q-pl-md"},Ut={class:"text-caption text-right text-bold"},Wt=(0,l.Uk)("Sign group "),Zt=(0,l.aZ)({__name:"TransactionSummary",setup(e){const t=p(),{currentGroup:a,web3Transactions:i,encodedTransactions:u,showSignDialog:r}=(0,s.Jk)(t),d=(0,l.Fl)((()=>a.value.transactions)),c=(0,l.Fl)((()=>d.value.reduce(((e,t)=>e+t.instructions.length),0))),m=(0,l.Fl)((()=>u.value.reduce(((e,t)=>e+t.length),0))),v=(0,l.Fl)((()=>i.value.reduce(((e,t)=>e+t.signatures.length),0))),g=(0,l.Fl)((()=>(0,pt.R)(5e-6*v.value,9)));return(e,t)=>{const a=(0,l.up)("q-separator"),s=(0,l.up)("q-card-section"),p=(0,l.up)("q-btn"),w=(0,l.up)("q-card-actions"),f=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l._)("div",mt,[vt,(0,l._)("div",null,(0,o.zw)((0,n.SU)(d).length),1)]),(0,l._)("div",null,[gt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(d),((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"text-caption text-right text-bold row justify-between",key:t},[(0,l._)("div",wt,(0,o.zw)(e.name),1),(0,l._)("div",null,(0,o.zw)(e.instructions.length),1)])))),128)),(0,l.Wm)(a),(0,l._)("div",ft,(0,o.zw)((0,n.SU)(c)),1)]),(0,l._)("div",null,[yt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(i),((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"text-caption text-right text-bold row justify-between",key:t},[(0,l._)("div",bt,(0,o.zw)((0,n.SU)(d)[t].name),1),(0,l._)("div",null,(0,o.zw)(e.signatures.length),1)])))),128)),(0,l.Wm)(a),(0,l._)("div",ht,(0,o.zw)((0,n.SU)(v)),1)]),(0,l._)("div",null,[xt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(u),((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"text-caption text-right text-bold row justify-between",key:t},[(0,l._)("div",_t,(0,o.zw)((0,n.SU)(d)[t].name),1),(0,l._)("div",null,(0,o.zw)(e.length),1)])))),128)),(0,l.Wm)(a),(0,l._)("div",kt,(0,o.zw)((0,n.SU)(m)),1)]),(0,l._)("div",null,[St,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(i),((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"text-caption text-right text-bold row justify-between",key:t},[(0,l._)("div",qt,(0,o.zw)((0,n.SU)(d)[t].name),1),(0,l._)("div",null,(0,o.zw)((0,n.SU)(pt.R)(5e-6*e.signatures.length,9))+" SOL",1)])))),128)),(0,l.Wm)(a),(0,l._)("div",Ut,(0,o.zw)((0,n.SU)(g))+" SOL",1)])])),_:1}),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{onClick:t[0]||(t[0]=e=>r.value=!0),color:"primary",unelevated:"",class:"full-width","no-caps":"",disable:0===(0,n.SU)(d).length},{default:(0,l.w5)((()=>[Wt])),_:1},8,["disable"])])),_:1})])),_:1})}}});var Qt=a(11821);const Vt=Zt,Ct=Vt;j()(Zt,"components",{QCard:S.Z,QCardSection:q.Z,QSeparator:et.Z,QCardActions:Qt.Z,QBtn:M.Z});var jt=a(9626),zt=a(83205),Dt=a(39882),It=a.n(Dt);const Kt=(0,l.aZ)({__name:"KeypairInput",props:{modelValue:null,acceptNull:{type:Boolean}},emits:["update:model-value"],setup(e,{emit:t}){const a=e,i=(0,l.Fl)((()=>a.modelValue?It().encode(a.modelValue.secretKey):""));function s(e){try{const a=JSON.parse(e),l=Uint8Array.from(a);return void t("update:model-value",u.Keypair.fromSecretKey(l))}catch(l){}try{const a=It().decode(e);return void t("update:model-value",u.Keypair.fromSecretKey(a))}catch(l){a.acceptNull&&t("update:model-value",null)}}return(e,t)=>{const a=(0,l.up)("q-input");return(0,l.wg)(),(0,l.j4)(a,(0,l.dG)(e.$attrs,{"model-value":(0,n.SU)(i),"onUpdate:modelValue":s,outlined:"",dense:"",autogrow:"",placeholder:"Keypair",class:"keypair-input",type:"textarea"}),(0,l.Nv)({_:2},[(0,l.Ko)(e.$slots,((t,a)=>({name:a,fn:(0,l.w5)((t=>[(0,l.WI)(e.$slots,a,(0,o.vs)((0,l.F4)(null!==t&&void 0!==t?t:{})))]))})))]),1040,["model-value"])}}}),Ft=(0,k.Z)(Kt,[["__scopeId","data-v-211954c5"]]),Tt=Ft;j()(Kt,"components",{QInput:fe.Z});const Bt=(0,l.Uk)("Provided"),Ht=(0,l.Uk)("Connected Wallet"),Pt=(0,l.aZ)({__name:"TransactionLocalSignature",props:{signature:null},setup(e){const t=e,a=(0,Ie.Z)(),o=(0,d.Os)(),i=(0,l.Fl)((()=>t.signature)),s=(0,l.Fl)((()=>o.publicKey.value&&t.signature.pubkey.equals(o.publicKey.value))),u=(0,l.Fl)((()=>"keypair"===i.value.type));function r(e){i.value.type=e?"keypair":"localWallet"}function c(e){e.publicKey.equals(t.signature.pubkey)?i.value.keypair=e:a.notify({color:"negative",message:"The keypair does not belong to the requested pubkey"})}return(t,a)=>{const o=(0,l.up)("q-badge"),i=(0,l.up)("q-toggle"),d=(0,l.up)("q-item-label"),p=(0,l.up)("q-item-section"),m=(0,l.up)("q-item");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"q-py-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"row gap-x-md justify-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(zt.Z,{long:"",pubkey:e.signature.pubkey},null,8,["pubkey"]),e.signature.provided?((0,l.wg)(),(0,l.j4)(o,{key:0,color:"primary"},{default:(0,l.w5)((()=>[Bt])),_:1})):(0,n.SU)(s)?((0,l.wg)(),(0,l.j4)(o,{key:1,color:"primary"},{default:(0,l.w5)((()=>[Ht])),_:1})):((0,l.wg)(),(0,l.j4)(i,{key:2,color:"primary",label:"Use keypair?","left-label":"",dense:"",size:"sm","model-value":(0,n.SU)(u),"onUpdate:modelValue":r},null,8,["model-value"]))])),_:1}),(0,n.SU)(u)?((0,l.wg)(),(0,l.j4)(d,{key:0,class:"q-mt-sm"},{default:(0,l.w5)((()=>{var t;return[(0,l.Wm)(Tt,{"model-value":null!==(t=e.signature.keypair)&&void 0!==t?t:null,"accept-null":"",outlined:"",dense:"",rows:2,"onUpdate:modelValue":c},null,8,["model-value"])]})),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1})}}}),Yt=Pt,Lt=Yt;j()(Pt,"components",{QItem:W.Z,QItemSection:Z.Z,QItemLabel:Q.Z,QBadge:ge.Z,QToggle:we.Z});var At=a(45356),Gt=a(93972),Ot=a(65326),Mt=a(88103),$t=a(48077);const Et=(0,l.Uk)("Copy to clipboard"),Nt=(0,l.aZ)({__name:"SignatureBadge",props:{signature:null,showCopy:{type:Boolean},showMenu:{type:Boolean}},setup(e){const t=e,a=(0,At.G)(),i=(0,n.iH)(!1),s=(0,l.Fl)((()=>(0,Ot.a)(t.signature))),u=(0,l.Fl)((()=>{var e;return t.showMenu&&(null===(e=t.showCopy)||void 0===e||e)})),r=(0,l.Fl)((()=>$t.U.find((e=>e.url===a.explorer))));function d(){u.value&&((0,De.Z)(t.signature),i.value=!0,setTimeout((()=>{i.value=!1}),2e3))}function c(){const e=r.value.resolver(Mt.S.Transaction,t.signature,a.network);window.open(e,"_blank")}return(t,a)=>{const p=(0,l.up)("q-icon"),m=(0,l.up)("q-separator"),v=(0,l.up)("q-item-section"),g=(0,l.up)("q-item-label"),w=(0,l.up)("q-item"),f=(0,l.up)("q-list"),y=(0,l.up)("q-card"),b=(0,l.up)("q-menu"),h=(0,l.up)("q-badge"),x=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(h,{class:(0,o.C_)(["text-bold text-white",{"cursor-pointer":(0,n.SU)(u)}])},{default:(0,l.w5)((()=>[(0,l._)("code",null,(0,o.zw)((0,n.SU)(s)),1),(0,n.SU)(u)&&!i.value?((0,l.wg)(),(0,l.j4)(p,{key:0,name:"fa-solid fa-location",class:"q-ml-xs"})):(0,l.kq)("",!0),(0,n.SU)(u)&&i.value?((0,l.wg)(),(0,l.j4)(p,{key:1,name:"fa-solid fa-circle-check",class:"q-ml-xs"})):(0,l.kq)("",!0),e.showMenu?((0,l.wg)(),(0,l.j4)(b,{key:2,anchor:"bottom middle",self:"top middle",offset:[20,0]},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"menu-card shadow-9"},{default:(0,l.w5)((()=>[(0,l.Wm)(m),(0,l.Wm)(f,{dense:"",separator:""},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(w,{clickable:"",onClick:d},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"fa-solid fa-clipboard",size:"14px"})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[Et])),_:1})])),_:1})])),_:1})),[[x]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(w,{clickable:"",onClick:c},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"fa-solid fa-arrow-up-right-from-square",size:"14px"})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Uk)("View in "+(0,o.zw)((0,n.SU)(r).name),1)])),_:1})])),_:1})])),_:1})),[[x]])])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1},8,["class"])}}});var Jt=a(22857),Rt=a(56362),Xt=a(62146);const ea=(0,k.Z)(Nt,[["__scopeId","data-v-0c8272cd"]]),ta=ea;j()(Nt,"components",{QBadge:ge.Z,QIcon:Jt.Z,QMenu:Rt.Z,QCard:S.Z,QSeparator:et.Z,QList:U.Z,QItem:W.Z,QItemSection:Z.Z,QItemLabel:Q.Z}),j()(Nt,"directives",{ClosePopup:Xt.Z});var aa=a(17779),la=function(e,t,a,l){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,o){function i(e){try{u(l.next(e))}catch(t){o(t)}}function s(e){try{u(l["throw"](e))}catch(t){o(t)}}function u(e){e.done?a(e.value):n(e.value).then(i,s)}u((l=l.apply(e,t||[])).next())}))};const na=(0,l.Uk)("Close"),oa=(0,l._)("div",null,"Serial send",-1),ia=(0,l._)("div",null,"Parallel send",-1),sa=(0,l._)("p",null,"To sign the transaction group you must provide the following signatures. Please pick how you would want to provide them, either pasting their keypairs or by using a multi-wallet signature.",-1),ua=(0,l.Uk)("Sign"),ra=(0,l._)("p",null,"Please connect the wallets one by one to sign the transaction. It will be sent automatically when all signatures are present.",-1),da=(0,l.Uk)("Retry "),ca=(0,l.Uk)("Cancel "),pa={key:3},ma=(0,l.Uk)(" Sending... "),va=(0,l.Uk)(": "),ga={class:"text-caption text-bold"},wa=(0,l.aZ)({__name:"TransactionLocalSigning",setup(e){const t=(0,Ie.Z)(),a=p(),i=(0,d.Os)(),r=(0,At.G)(),{currentGroup:c}=(0,s.Jk)(a),m=(0,n.iH)(!1),v=(0,n.iH)(-1),g=(0,n.iH)(!1),w=(0,n.iH)(!1),f=(0,n.iH)([]),y=(0,n.iH)([]),b=(0,l.Fl)((()=>c.value.transactions)),h=(0,l.Fl)((()=>{const e={};for(const t of b.value){for(let a=0;a<t.instructions.length;a++){const l=t.instructions[a],n=t.data[a];for(const t of l.accounts)if(t.signer){const a=n[t.id];if((0,F.V)(a)){if(e[a.toBase58()])continue;e[a.toBase58()]={type:"localWallet",pubkey:a}}else e[a.publicKey.toBase58()]={type:"keypair",pubkey:a.publicKey,keypair:a,provided:!0}}}e[t.payer.toBase58()]||(e[t.payer.toBase58()]={type:"localWallet",pubkey:t.payer})}return(0,n.qj)(Object.values(e))})),x=(0,l.Fl)((()=>{for(const e of h.value)if("keypair"===e.type&&!e.keypair)return!1;return!0})),_=(0,l.Fl)((()=>{const e={keypairSignatures:[],walletSignatures:[]};for(const t of h.value)"keypair"===t.type?e.keypairSignatures.push(t):e.walletSignatures.push((0,n.qj)(Object.assign(Object.assign({},t),{done:!1})));return e})),k=(0,l.Fl)((()=>v.value>-1)),S=(0,l.Fl)((()=>{if(null===i.publicKey.value)return!1;for(const e of _.value.walletSignatures)if(e.pubkey.equals(i.publicKey.value))return!e.done;return!1}));function q(){return la(this,void 0,void 0,(function*(){return y.value.splice(0,y.value.length),f.value=b.value.map((e=>{const t=new u.Transaction;return t.add(...e.instructions.map(((t,a)=>t.build(t,e.data[a])))),t.feePayer=e.payer,t.recentBlockhash=u.PublicKey["default"].toBase58(),t.serializeMessage(),t})),_.value.walletSignatures.forEach((e=>e.done=!1)),g.value=!1,v.value=0,m.value?W():U()}))}function U(){return la(this,void 0,void 0,(function*(){const e=_.value.keypairSignatures.map((e=>e.keypair)),t=(yield r.connection.getLatestBlockhash()).blockhash,a=f.value[v.value];a.recentBlockhash=t;const l=e.filter((e=>a.signatures.some((t=>t.publicKey.equals(e.publicKey)))));return l.length>0&&a.partialSign(...l),Z()}))}function W(){return la(this,void 0,void 0,(function*(){const e=_.value.keypairSignatures.map((e=>e.keypair)),t=(yield r.connection.getLatestBlockhash()).blockhash;for(const a of f.value){a.recentBlockhash=t;const l=e.filter((e=>a.signatures.some((t=>t.publicKey.equals(e.publicKey)))));l.length>0&&a.partialSign(...l)}return Q()}))}function Z(){return la(this,void 0,void 0,(function*(){const e=f.value[v.value];let a=_.value.walletSignatures.length;for(const n of _.value.walletSignatures)if(!n.done)if(e.signatures.some((e=>e.publicKey.equals(n.pubkey)))){if(i.publicKey.value&&n.pubkey.equals(i.publicKey.value))try{yield i.signTransaction.value(e),n.done=!0;continue}catch(l){-1!==v.value&&(aa.error("error signing with wallet",l),t.notify({message:"Error signing with wallet",color:"negative"}))}a-=1}else n.done=!0;if(a===_.value.walletSignatures.length)return V();g.value=!0}))}function Q(){return la(this,void 0,void 0,(function*(){let e=_.value.walletSignatures.length;for(const l of _.value.walletSignatures)if(!l.done){if(i.publicKey.value&&l.pubkey.equals(i.publicKey.value)){const e=[];for(const t of f.value)t.signatures.some((e=>e.publicKey.equals(l.pubkey)))&&e.push(t);try{yield i.signAllTransactions.value(e),l.done=!0;continue}catch(a){-1!==v.value&&(aa.error("error signing with wallet",a),t.notify({message:"Error signing with wallet",color:"negative"}))}}e-=1}if(e===_.value.walletSignatures.length)return C();g.value=!0}))}function V(){return la(this,void 0,void 0,(function*(){g.value=!1,w.value=!0;const e=b.value[v.value],a=f.value[v.value];try{const l=yield r.connection.sendRawTransaction(a.serialize());y.value.push({txIndex:v.value,signature:l}),t.notify({message:`${e.name} sent`,color:"positive",badgeColor:"positive"})}catch(l){return aa.error(`error sending transaction: ${e.name}`,l),t.notify({message:`Cannot send ${e.name}: ${l}`,color:"negative",classes:"persistent-notification-error",closeBtn:!0,timeout:0}),void(v.value=-1)}if(_.value.walletSignatures.forEach((e=>e.done=!1)),w.value=!1,v.value+=1,!(v.value>=f.value.length))return U();v.value=-1}))}function C(){return la(this,void 0,void 0,(function*(){g.value=!1,w.value=!0;const e=[];for(let a=0;a<f.value.length;a++){const l=b.value[a],n=f.value[a];e.push(r.connection.sendRawTransaction(n.serialize()).then((e=>{y.value.push({txIndex:a,signature:e}),t.notify({message:`${l.name} sent`,color:"positive",badgeColor:"positive"})})).catch((e=>{aa.error(`error sending transaction: ${l.name}`,e),t.notify({message:`Cannot send ${l.name}: ${e}`,color:"negative",classes:"persistent-notification-error",closeBtn:!0,timeout:0})})))}yield Promise.all(e),w.value=!1,v.value=-1}))}function j(){m.value?Q():Z()}function z(){v.value=-1}return(0,l.YP)(i.publicKey,(e=>{e&&g.value&&j()})),(e,t)=>{const a=(0,l.up)("q-space"),i=(0,l.up)("q-tooltip"),s=(0,l.up)("q-btn"),u=(0,l.up)("q-bar"),r=(0,l.up)("q-toggle"),d=(0,l.up)("q-card-section"),p=(0,l.up)("q-list"),f=(0,l.up)("q-card-actions"),U=(0,l.up)("q-icon"),W=(0,l.up)("q-item-label"),Z=(0,l.up)("q-item-section"),Q=(0,l.up)("q-item"),V=(0,l.up)("q-spinner"),C=(0,l.up)("q-separator"),D=(0,l.up)("q-card"),I=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(D,{class:"full-width"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,"Signing "+(0,o.zw)((0,n.SU)(c).name),1),(0,l.Wm)(a),(0,l.wy)(((0,l.wg)(),(0,l.j4)(s,{dense:"",flat:"",icon:"fa-solid fa-xmark"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"bg-white text-primary"},{default:(0,l.w5)((()=>[na])),_:1})])),_:1})),[[I]])])),_:1}),(0,n.SU)(b).length>1?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,n.SU)(k)?m.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(d,{key:1,class:"row flex-center q-mx-md"},{default:(0,l.w5)((()=>[(0,l._)("div",null,"Signing: "+(0,o.zw)((0,n.SU)(b)[v.value].name),1)])),_:1})):((0,l.wg)(),(0,l.j4)(d,{key:0,class:"row flex-center q-mx-md"},{default:(0,l.w5)((()=>[oa,(0,l.Wm)(r,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e)},null,8,["modelValue"]),ia])),_:1}))],64)):(0,l.kq)("",!0),(0,n.SU)(k)?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[ra,(0,l.Wm)(p,{dense:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(_).keypairSignatures,(e=>((0,l.wg)(),(0,l.j4)(Q,{key:e.pubkey.toBase58()},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"q-py-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"row gap-x-md justify-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(zt.Z,{long:"",pubkey:e.pubkey},null,8,["pubkey"]),(0,l.Wm)(U,{color:"primary",name:"fa-solid fa-circle-check"})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(_).walletSignatures,(e=>((0,l.wg)(),(0,l.j4)(Q,{key:e.pubkey.toBase58()},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"q-py-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"row gap-x-md justify-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(zt.Z,{long:"",pubkey:e.pubkey},null,8,["pubkey"]),e.done?((0,l.wg)(),(0,l.j4)(U,{key:0,color:"primary",name:"fa-solid fa-circle-check"})):((0,l.wg)(),(0,l.j4)(U,{key:1,name:"fa-regular fa-circle"}))])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,l.Wm)(f,{class:"flex flex-center gap-md"},{default:(0,l.w5)((()=>[g.value?((0,l.wg)(),(0,l.j4)(Gt.Z,{key:0})):(0,l.kq)("",!0),g.value&&(0,n.SU)(S)?((0,l.wg)(),(0,l.j4)(s,{key:1,onClick:j,color:"primary",unelevated:"","no-caps":""},{default:(0,l.w5)((()=>[da])),_:1})):(0,l.kq)("",!0),w.value?((0,l.wg)(),(0,l.iD)("div",pa,[ma,(0,l.Wm)(V)])):((0,l.wg)(),(0,l.j4)(s,{key:2,onClick:z,color:"negative",unelevated:"","no-caps":""},{default:(0,l.w5)((()=>[ca])),_:1}))])),_:1})],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[sa,(0,l.Wm)(p,{dense:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(h),(e=>((0,l.wg)(),(0,l.j4)(Lt,{key:e.pubkey.toBase58(),signature:e},null,8,["signature"])))),128))])),_:1})])),_:1}),(0,l.Wm)(f,{class:"flex flex-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{onClick:q,color:"primary",unelevated:"","no-caps":"",disable:!(0,n.SU)(x)},{default:(0,l.w5)((()=>[ua])),_:1},8,["disable"])])),_:1})],64)),y.value.length>0?((0,l.wg)(),(0,l.iD)(l.HY,{key:3},[(0,l.Wm)(C),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{dense:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.value,(e=>((0,l.wg)(),(0,l.j4)(Q,{key:e.signature},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W,{style:{"word-break":"break-all"}},{default:(0,l.w5)((()=>[(0,l._)("u",null,[(0,l._)("b",null,(0,o.zw)((0,n.SU)(b)[e.txIndex].name),1)]),va,(0,l._)("span",ga,[(0,l.Wm)(ta,{long:"","show-copy":"","show-menu":"",signature:e.signature},null,8,["signature"])])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})],64)):(0,l.kq)("",!0)])),_:1})}}});var fa=a(13902);const ya=wa,ba=ya;j()(wa,"components",{QCard:S.Z,QBar:Re.Z,QSpace:Qe.Z,QBtn:M.Z,QTooltip:Ve.Z,QCardSection:q.Z,QToggle:we.Z,QList:U.Z,QCardActions:Qt.Z,QItem:W.Z,QItemSection:Z.Z,QItemLabel:Q.Z,QIcon:Jt.Z,QSpinner:fa.Z,QSeparator:et.Z}),j()(wa,"directives",{ClosePopup:Xt.Z});const ha={class:"full-height column"},xa={class:"header"},_a={class:"row items-center no-wrap gap-xs"},ka={class:"text-bold text-body2 q-mr-sm"},Sa={key:0},qa={class:"q-mx-sm row no-wrap gap-sm"},Ua=(0,l.Uk)("Add group"),Wa=(0,l.Uk)("Rename group"),Za={class:"container q-pa-lg row justify-center items-start no-wrap gap-md col"},Qa={class:"tx-container col full-height"},Va={class:"summary full-height"},Ca={class:"full-width full-height"},ja={class:"summary q-mb-lg"},za={class:"tx-container col"},Da=(0,l.aZ)({__name:"TxBuilderPage",setup(e){const t=p(),a=(0,jt.s)(),{groups:u,groupIndex:r,currentGroup:d,showSignDialog:c}=(0,s.Jk)(t),m=(0,l.Fl)((()=>u.value.length>1)),v=(0,l.Fl)((()=>a.windowWidth<=1e3));function g(){t.addGroup(),r.value=u.value.length-1}return(e,s)=>{const p=(0,l.up)("q-icon"),w=(0,l.up)("q-btn"),f=(0,l.up)("q-tab"),y=(0,l.up)("q-space"),b=(0,l.up)("q-separator"),h=(0,l.up)("q-tooltip"),x=(0,l.up)("q-input"),_=(0,l.up)("q-popup-edit"),k=(0,l.up)("q-tabs"),S=(0,l.up)("q-scroll-area"),q=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)("div",ha,[(0,l._)("div",xa,[(0,l.Wm)(k,{modelValue:(0,n.SU)(r),"onUpdate:modelValue":s[1]||(s[1]=e=>(0,n.dq)(r)?r.value=e:null),dense:"",class:"tabs",align:"left","active-color":"primary","left-icon":"fa-solid fa-chevron-left","right-icon":"fa-solid fa-chevron-right","outside-arrows":"","mobile-arrows":""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(u),((e,a)=>((0,l.wg)(),(0,l.j4)(f,{name:a,key:a,"no-caps":"",class:"q-pl-md q-pr-sm"},{default:(0,l.w5)((()=>[(0,l._)("div",_a,[(0,l._)("div",null,[(0,l.Wm)(p,{name:"fa-solid fa-book"})]),(0,l._)("div",ka,(0,o.zw)(e.name),1),(0,n.SU)(m)?((0,l.wg)(),(0,l.iD)("div",Sa,[(0,l.Wm)(w,{onClick:(0,i.iM)((e=>(0,n.SU)(t).removeGroup(a)),["stop"]),flat:"",round:"",class:"rounded-borders",dense:"",size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"fa-solid fa-close"})])),_:2},1032,["onClick"])])):(0,l.kq)("",!0)])])),_:2},1032,["name"])))),128)),(0,l.Wm)(y),(0,l.Wm)(b,{vertical:""}),(0,l._)("div",qa,[(0,l.Wm)(w,{onClick:g,flat:"",round:"",class:"rounded-borders",color:"primary",dense:"",size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"fa-solid fa-plus"}),(0,l.Wm)(h,{class:"text-no-wrap text-white text-bold shadow-2"},{default:(0,l.w5)((()=>[Ua])),_:1})])),_:1}),(0,l.Wm)(w,{flat:"",round:"",class:"rounded-borders",dense:"",size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"fa-solid fa-pencil",size:"14px"}),(0,l.Wm)(h,{class:"text-no-wrap text-white text-bold shadow-2"},{default:(0,l.w5)((()=>[Wa])),_:1}),(0,l.Wm)(_,{modelValue:(0,n.SU)(d).name,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,n.SU)(d).name=e),"auto-save":""},{default:(0,l.w5)((e=>[(0,l.Wm)(x,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,maxlength:20,dense:"",autofocus:"",onKeyup:(0,i.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["modelValue"])]),(0,l._)("div",Za,[(0,n.SU)(v)?((0,l.wg)(),(0,l.j4)(S,{key:1,class:"full-width full-height"},{default:(0,l.w5)((()=>[(0,l._)("div",ja,[(0,l.Wm)(Ct)]),(0,l._)("div",za,[(0,l.Wm)(ct)])])),_:1})):((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",Qa,[(0,l.Wm)(S,{class:"full-width full-height","content-active-style":"full-width"},{default:(0,l.w5)((()=>[(0,l.Wm)(ct)])),_:1})]),(0,l._)("div",Va,[(0,l._)("div",Ca,[(0,l.Wm)(S,{class:"full-width full-height"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ct)])),_:1})])])],64))]),(0,l.Wm)(q,{modelValue:(0,n.SU)(c),"onUpdate:modelValue":s[2]||(s[2]=e=>(0,n.dq)(c)?c.value=e:null),maximized:(0,n.SU)(a).isMobile,persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ba)])),_:1},8,["modelValue","maximized"])])}}});var Ia=a(47817),Ka=a(70900),Fa=a(66663);const Ta=(0,k.Z)(Da,[["__scopeId","data-v-b9f1bdd0"]]),Ba=Ta;j()(Da,"components",{QTabs:Ia.Z,QTab:Ka.Z,QIcon:Jt.Z,QBtn:M.Z,QSpace:Qe.Z,QSeparator:et.Z,QTooltip:Ve.Z,QPopupEdit:Xe.Z,QInput:fe.Z,QScrollArea:Fa.Z,QDialog:$.Z})}}]);